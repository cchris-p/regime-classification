Here’s how to think about **COICOP 1999 vs COICOP 2018** in your regime-finding pipeline:

---

### 1. **What the distinction is**

* **COICOP 1999**: Older classification of consumer baskets. Used historically by OECD and national stats offices. Many long back histories only exist here.
* **COICOP 2018**: Newer classification, harmonized across countries, aligns with Eurostat/ECB HICP. This is now the OECD’s forward standard.

Both have a sub-aggregate: *“All items less food and energy”*, which is your **core CPI** definition.

---

### 2. **Implication for your methodology**

* You need **consistent core CPI YoY differentials** across both countries in each FX pair.
* Regime segmentation depends on comparability (you don’t want spurious breaks caused by metadata changes).

---

### 3. **Rule of thumb**

* **Default:** Pull **COICOP 2018**. It’s the current OECD standard and best aligned across majors.
* **If a country’s 2018 series is short or missing:** fall back to **1999** to extend history.
* If you need **long time spans (backtests >15–20y):** you will likely stitch **1999 (pre-2018)** with **2018 (post-2018)**.
* If you need **only the last decade:** use 2018 only (cleaner, less risk of breaks).

---

### 4. **How to stitch for FX**

When building `cpi_diff_core` for pairs:

* Ensure **both sides of the pair use the same classification version** (1999 vs 2018).
* If one side lacks 2018 data for earlier years, you should either:

  1. Backfill with 1999 data and splice at the transition date, or
  2. Restrict analysis to 2018+ period.

Example:

* USDJPY: US has long 2018 coverage, Japan only from ~2018. To analyze 2000–2025 you’d need US(1999)–JP(1999) for early period, then switch both to 2018 later.

---

### 5. **For your pipeline**

* Implement a **data-prep rule:**

  * Try OECD **2018 core CPI** first.
  * If unavailable, fetch **1999 version**.
  * Document splicing dates.
  * Standardize to YoY % change before differencing.

---

✅ **So the distinction matters for historical continuity:**

* If you want **long backtests**, you need to splice (1999 → 2018).
* If you want **modern analysis only**, stick with 2018.

---

Do you want me to produce a **lookup table** for the forex majors (USD, JPY, GBP, AUD, CAD, NZD, CHF) showing which have 2018 coverage and how far back it goes, so you know where you’d need 1999 fallback?
